% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/vgi_all_games_top_countries.R
\name{vgi_all_games_top_countries}
\alias{vgi_all_games_top_countries}
\title{Get Top Countries Data for All Games}
\usage{
vgi_all_games_top_countries(
  auth_token = Sys.getenv("VGI_AUTH_TOKEN"),
  headers = list()
)
}
\arguments{
\item{auth_token}{Character string. Your VGI API authentication token.
Defaults to the VGI_AUTH_TOKEN environment variable.}

\item{headers}{List. Optional custom headers to include in the API request.}
}
\value{
A data frame with columns:
\describe{
\item{steamAppId}{Integer. The Steam App ID}
\item{topCountries}{List. Top countries with their player percentages}
\item{countryCount}{Integer. Number of countries in the data}
\item{topCountry}{Character. The #1 country by player count}
\item{topCountryPct}{Numeric. Percentage of players from top country}
}
}
\description{
Retrieve top countries by player count for all games, providing insights
into global gaming preferences and regional market dynamics.
}
\details{
This endpoint helps identify:
\itemize{
\item Games with global vs regional appeal
\item Regional gaming preferences
\item Localization opportunities
\item Market penetration patterns
\item Cultural gaming trends
}

The topCountries list column contains detailed country breakdowns
that can be expanded for deeper analysis.
}
\examples{
\dontrun{
# Get top countries for all games
countries_data <- vgi_all_games_top_countries()

# Find games dominated by specific countries
us_dominated <- countries_data[countries_data$topCountry == "US" & 
                              countries_data$topCountryPct > 50, ]
cat("Games where >50\% of players are from US:", nrow(us_dominated), "\n")

# Find globally diverse games
global_games <- countries_data[countries_data$topCountryPct < 20 & 
                              countries_data$countryCount > 50, ]
cat("Globally diverse games (<20\% from any country):", nrow(global_games), "\n")

# Analyze regional preferences
top_countries_summary <- table(countries_data$topCountry)
top_10_countries <- head(sort(top_countries_summary, decreasing = TRUE), 10)

barplot(top_10_countries,
        main = "Countries Most Often #1 in Games",
        xlab = "Country",
        ylab = "Number of Games Where #1",
        las = 2,
        col = "steelblue")

# Extract detailed country data for a specific game
game_id <- 730  # Example game
game_countries <- countries_data$topCountries[
  countries_data$steamAppId == game_id][[1]]
if (!is.null(game_countries)) {
  print(head(game_countries, 10))
}

# Find games popular in specific regions
# Extract games where China is in top 3
china_popular <- countries_data[sapply(countries_data$topCountries, 
  function(tc) {
    if (is.null(tc) || nrow(tc) < 3) return(FALSE)
    "CN" \%in\% tc$country[1:3]
  }), ]
cat("Games where China is in top 3 countries:", nrow(china_popular), "\n")

# Calculate market concentration
countries_data$top3_concentration <- sapply(countries_data$topCountries,
  function(tc) {
    if (is.null(tc) || nrow(tc) < 3) return(NA)
    sum(tc$percentage[1:3])
  })

# Games with highest geographic concentration
concentrated <- countries_data[!is.na(countries_data$top3_concentration) & 
                              countries_data$top3_concentration > 70, ]
cat("Games where top 3 countries >70\% of players:", nrow(concentrated), "\n")

# Regional gaming hours analysis
# Games popular in Asia vs Americas vs Europe
asia_countries <- c("CN", "JP", "KR", "TW", "HK", "SG", "TH", "ID")
americas_countries <- c("US", "CA", "BR", "MX", "AR", "CL", "CO")
europe_countries <- c("DE", "FR", "GB", "IT", "ES", "PL", "NL", "SE")

countries_data$asia_pct <- sapply(countries_data$topCountries,
  function(tc) {
    if (is.null(tc)) return(0)
    sum(tc$percentage[tc$country \%in\% asia_countries])
  })

asia_focused <- countries_data[countries_data$asia_pct > 50, ]
cat("Games with >50\% Asian players:", nrow(asia_focused), "\n")
}
}
